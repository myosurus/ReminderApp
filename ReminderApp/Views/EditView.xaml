<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    x:Class="ReminderApp.Views.EditView"
    Title="Редактировать задачу"
    BackgroundColor="#F7EAFB">

	<ScrollView>
		<VerticalStackLayout Padding="20" Spacing="15">

			<BoxView HeightRequest="1" Color="#EEEEEE"/>

			<!-- Название -->
			<VerticalStackLayout Spacing="5">
				<Label Text="Название задачи"
                       FontSize="14"
                       FontAttributes="Bold"
                       TextColor="#333333"/>
                <Entry Placeholder="Введите название задачи..."
                       Text="{Binding Name}"
                       BackgroundColor="White"
                       TextColor="#333333"/>
            </VerticalStackLayout>
 
            <!-- Описание -->
			<VerticalStackLayout Spacing="5">
				<Label Text="Описание задачи"
                       FontSize="14"
                       FontAttributes="Bold"
                       TextColor="#333333"/>
                <Editor Placeholder="Добавьте описание задачи..."
                       Text="{Binding Description}"
                       HeightRequest="80"
                       BackgroundColor="White"
                       TextColor="#333333"
                       AutoSize="TextChanges"/>
            </VerticalStackLayout>

            <!-- Срочность и дата -->
            
            <Grid ColumnDefinitions="*,*" ColumnSpacing="10">
                <VerticalStackLayout Grid.Column="0" Spacing="5">
                    <Label Text="Срок выполнения"
                           FontSize="12"
                           FontAttributes="Bold"
                           TextColor="#333333"
                           Margin="0,0,0,0"/>
                    <DatePicker Date="{Binding ReminderDate}"
                            Format="dd.MM.yyyy"
                            BackgroundColor="White"
                            TextColor="#333333"/>
                    <TimePicker Time="{Binding ReminderTime}"
                            BackgroundColor="White"
                            TextColor="#333333"/>
                </VerticalStackLayout>

                <VerticalStackLayout Grid.Column="1" Spacing="5">
                    <Label Text="Начало напоминания" 
                           FontSize="12"
                           FontAttributes="Bold" 
                           TextColor="#333333"/>
                    <DatePicker 
                            Date="{Binding StartRemindingDate}" 
                            Format="dd.MM.yyyy" 
                            BackgroundColor="White" 
                            TextColor="#333333"/>
                    <TimePicker 
                            Time="{Binding StartRemindingTime}" 
                            BackgroundColor="White" 
                            TextColor="#333333"/>
                </VerticalStackLayout>
            </Grid>

            <Grid ColumnDefinitions="*,*" ColumnSpacing="10">
                <VerticalStackLayout Grid.Column="0" Spacing="5">
                        <Label 
                                Text="Частота напоминаний" 
                                FontSize="12" 
                                FontAttributes="Bold"
                                TextColor="#333333"
                                Margin="0,15,0,0"/>
                        <HorizontalStackLayout Spacing="10">
                            <Entry 
                                    Text="{Binding FrequencyValue}" 
                                    Keyboard="Numeric" 
                                    WidthRequest="80" 
                                    BackgroundColor="White" 
                                    TextColor="#333333"
                                    Margin="0,0,0,0"/>
                            <Picker 
                                ItemsSource="{Binding FrequencyUnits}" 
                                SelectedItem="{Binding FrequencyUnit}" 
                                WidthRequest="80" BackgroundColor="White" 
                                TextColor="#333333"
                                Margin="0,0,0,0"/>
                        </HorizontalStackLayout>

                </VerticalStackLayout>

                <VerticalStackLayout Grid.Column="1" Spacing="5">
                    <VerticalStackLayout Spacing="5" HorizontalOptions="Center" Margin="0,25,0,0">

                        <Frame BackgroundColor="{Binding UrgencyColor}"
                               CornerRadius="25"
                               Padding="0"
                               HasShadow="False"
                               HeightRequest="40"
                               WidthRequest="90"
                               HorizontalOptions="Center"
                               Margin="5,0,0,0">
                            
                        </Frame>

                        <Label Text="{Binding DueStatusText}"
                               FontSize="11"
                               FontAttributes="Bold"
                               TextColor="#555"
                               HorizontalTextAlignment="Center"
                               Margin="8,4,0,0"/>
                    </VerticalStackLayout>
                </VerticalStackLayout>
            </Grid>

            <!-- Кнопки -->
			<Grid ColumnDefinitions="*,*" ColumnSpacing="10" Margin="0,10,0,0">
				<Button Grid.Column="0"
                        Text="Отмена"
                        BackgroundColor="#F5F5F5"
                        FontSize="16"
                        FontAttributes="Bold"
                        TextColor="#666666"
                        Command="{Binding CancelCommand}" />
				<Button Grid.Column="1"
                        Text="Сохранить"
                        BackgroundColor="#007AFF"
                        FontSize="16"
                        FontAttributes="Bold"
                        TextColor="White"
                        Command="{Binding SaveCommand}" />
			</Grid>

			<!-- Удаление -->
            <Button Text="X"
                    BackgroundColor="#FF3B30"
                    TextColor="White"
                    FontSize="14"
                    FontAttributes="Bold"
                    CornerRadius="20"
                    HeightRequest="42"
                    Padding="16,0"
                    Command="{Binding DeleteCommand}"
                    IsVisible="{Binding IsDeleteVisible}"
                    HorizontalOptions="Center"
                    Margin="0,5,0,10">
                <Button.Shadow>
                    <Shadow Brush="#40000000" Offset="1,2" Radius="6" Opacity="0.25"/>
                </Button.Shadow>
            </Button>

            <BoxView HeightRequest="1" Color="#EEEEEE" Margin="0,10,0,0"/>

		</VerticalStackLayout>
	</ScrollView>
</ContentPage>
